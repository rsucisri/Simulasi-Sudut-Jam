<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Sudut Jam Analog (Portabel)</title>
    <!-- Memuat Tailwind CSS untuk Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat React dan ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Memuat Babel untuk mengolah JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Bagian Lucide Icons yang bermasalah (type="module") telah dihapus.
         Ikon sekarang didefinisikan sebagai komponen SVG di bawah. -->
    
    <style>
        /* Gaya dasar untuk Range Input */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }
        input[type="range"].accent-green-600::-webkit-slider-thumb { background: #10b981; }
        input[type="range"].accent-red-600::-webkit-slider-thumb { background: #ef4444; }
        input[type="range"].accent-blue-600::-webkit-slider-thumb { background: #3b82f6; }
    </style>
</head>
<body class="bg-gray-50">

<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

// --- Definisi Ikon SVG In-Line (Pengganti Lucide) untuk menghindari error import ---

const Clock = (props) => (
    <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
);

const Calculator = (props) => (
    <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="10" y2="18"/><line x1="12" x2="12" y1="10" y2="14"/><line x1="8" x2="8" y1="10" y2="12"/></svg>
);

const RotateCcw = (props) => (
    <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 5.3a8.9 8.9 0 1 1-1.3 6.9"/><path d="M3 1v4h4"/></svg>
);

// --- Akhir Definisi Ikon ---

function App() {
  const [hour, setHour] = useState(10); 
  const [minute, setMinute] = useState(10);
  const [second, setSecond] = useState(30);
  
  const canvasRef = useRef(null);

  // Konstanta ukuran canvas
  const size = 320;
  const center = size / 2;
  const radius = size / 2 - 20;

  const toRad = (deg) => (deg - 90) * (Math.PI / 180);

  // Variabel untuk hasil perhitungan (derived state)
  const secAngle = second * 6;
  // Menit dipengaruhi detik
  const minAngle = (minute * 6) + (second * 0.1);
  // Jam dipengaruhi menit dan detik
  const hourAngle = ((hour % 12) * 30) + (minute * 0.5) + (second * (0.5 / 60));

  // --- HITUNG SUDUT ANTARA ---
  let rawDiff = Math.abs(hourAngle - minAngle);
  // Ambil sudut terkecil (jika > 180, ambil sisi sebaliknya)
  const angleBetween = rawDiff > 180 ? 360 - rawDiff : rawDiff;

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext('2d');

    ctx.clearRect(0, 0, size, size);

    // --- 1. Gambar Wajah Jam ---
    ctx.beginPath();
    ctx.arc(center, center, radius, 0, 2 * Math.PI);
    ctx.fillStyle = 'white';
    ctx.fill();
    ctx.lineWidth = 8;
    ctx.strokeStyle = '#333';
    ctx.stroke();

    // Angka Jam
    ctx.font = 'bold 16px Arial';
    ctx.fillStyle = '#333';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    for (let num = 1; num <= 12; num++) {
      const ang = num * 30 * (Math.PI / 180);
      const x = center + (radius - 35) * Math.sin(ang);
      const y = center - (radius - 35) * Math.cos(ang);
      ctx.fillText(num.toString(), x, y);
    }

    // Tanda Detik/Menit Kecil
    for(let i = 0; i < 60; i++){
      const ang = i * 6 * (Math.PI / 180);
      const rOut = radius - 10;
      const rIn = i % 5 === 0 ? radius - 20 : radius - 15;
      const x1 = center + rOut * Math.sin(ang);
      const y1 = center - rOut * Math.cos(ang);
      const x2 = center + rIn * Math.sin(ang);
      const y2 = center - rIn * Math.cos(ang);
      
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.lineWidth = i % 5 === 0 ? 3 : 1;
      ctx.strokeStyle = '#555';
      ctx.stroke();
    }

    // --- 2. Gambar Area Sudut (Highlight) ---
    // Kita gambar "pie slice" di antara dua sudut
    ctx.beginPath();
    ctx.moveTo(center, center);
    
    // Tentukan start dan end agar arsiran selalu mengambil rute terpendek
    let startRad = toRad(Math.min(hourAngle, minAngle));
    let endRad = toRad(Math.max(hourAngle, minAngle));

    if (Math.abs(hourAngle - minAngle) > 180) {
         ctx.arc(center, center, radius * 0.45, startRad, endRad, true); 
    } else {
         ctx.arc(center, center, radius * 0.45, startRad, endRad, false);
    }

    ctx.fillStyle = 'rgba(255, 193, 7, 0.4)'; // Warna Kuning Transparan
    ctx.fill();
    
    // Garis batas arsiran
    ctx.strokeStyle = '#d97706';
    ctx.lineWidth = 1;
    ctx.stroke();


    // --- 3. Gambar Jarum ---
    const drawHand = (angle, length, width, color) => {
      const rad = toRad(angle);
      ctx.beginPath();
      ctx.lineWidth = width;
      ctx.lineCap = "round";
      ctx.strokeStyle = color;
      ctx.moveTo(center, center);
      ctx.lineTo(center + length * Math.cos(rad), center + length * Math.sin(rad));
      ctx.stroke();
    };

    // Jarum Jam (Hitam Tebal)
    drawHand(hourAngle, radius * 0.5, 8, 'black');
    // Jarum Menit (Hitam Sedang)
    drawHand(minAngle, radius * 0.75, 5, '#444');
    // Jarum Detik (Merah Tipis) - Tetap ada untuk akurasi posisi menit
    drawHand(secAngle, radius * 0.85, 2, 'red');

    // Titik Pusat
    ctx.beginPath();
    ctx.arc(center, center, 6, 0, 2 * Math.PI);
    ctx.fillStyle = '#333';
    ctx.fill();
    ctx.beginPath();
    ctx.arc(center, center, 3, 0, 2 * Math.PI);
    ctx.fillStyle = 'red';
    ctx.fill();

  }, [hour, minute, second, hourAngle, minAngle, secAngle]);

  // --- Logika 12 Jam ---
  const isPm = hour >= 12;
  const displayHour = hour % 12 || 12; 

  const toggleAmPm = () => {
    if (isPm) setHour(hour - 12);
    else setHour(hour + 12);
  };

  const handleHourChange = (val) => {
    if (isPm) setHour(val === 12 ? 12 : val + 12);
    else setHour(val === 12 ? 0 : val);
  };

  const resetTime = () => {
    const now = new Date();
    setHour(now.getHours());
    setMinute(now.getMinutes());
    setSecond(now.getSeconds());
  }

  return (
    <div className="min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4 font-sans">
      <div className="bg-white p-6 rounded-2xl shadow-xl w-full max-w-5xl flex flex-col md:flex-row gap-8 items-start">
        
        {/* Kolom Kiri: Visualisasi */}
        <div className="flex flex-col items-center gap-4 w-full md:w-1/2">
          <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
            <Clock className="w-6 h-6" />
            Simulasi Sudut Jam
          </h2>
          <div className="relative">
            <canvas 
              ref={canvasRef} 
              width={size} 
              height={size} 
              className="bg-transparent rounded-full shadow-inner border-4 border-gray-200"
            />
          </div>
          
          <div className="bg-gray-100 px-4 py-2 rounded-lg font-mono text-xl font-bold text-gray-700 tracking-wider flex items-center gap-2">
            <span>{displayHour.toString().padStart(2, '0')} : {minute.toString().padStart(2, '0')} : {second.toString().padStart(2, '0')}</span>
            <span className={`text-sm px-2 py-0.5 rounded ${isPm ? 'bg-indigo-100 text-indigo-700' : 'bg-orange-100 text-orange-700'}`}>
              {isPm ? 'PM' : 'AM'}
            </span>
          </div>
        </div>

        {/* Kolom Kanan: Kontrol & Hasil Utama */}
        <div className="flex-1 w-full space-y-6">
          
          {/* HASIL UTAMA (HIGHLIGHT) */}
          <div className="bg-amber-50 border-2 border-amber-200 rounded-xl p-5 text-center shadow-sm relative overflow-hidden">
             <div className="absolute top-0 left-0 w-2 h-full bg-amber-400"></div>
             <h3 className="text-gray-600 font-semibold mb-1 uppercase tracking-wider text-sm">Sudut Terkecil (Jam vs Menit)</h3>
             <div className="text-5xl font-bold text-gray-800 my-2">
                {angleBetween.toFixed(2)}°
             </div>
             <div className="text-xs text-amber-700 font-medium">
               Selisih mutlak |{hourAngle.toFixed(1)}° - {minAngle.toFixed(1)}°|
             </div>
          </div>

          <div className="flex justify-between items-center border-b pb-2 mt-4">
            <h3 className="text-lg font-semibold text-gray-700 flex items-center gap-2">
              <Calculator className="w-5 h-5" />
              Input Waktu
            </h3>
            <button 
              onClick={resetTime}
              className="text-sm bg-blue-50 text-blue-600 px-3 py-1 rounded hover:bg-blue-100 transition flex items-center gap-1"
            >
              <RotateCcw className="w-3 h-3" /> Waktu Sekarang
            </button>
          </div>

          {/* Input Jam (12H) */}
          <div className="space-y-3 p-3 rounded-lg border border-gray-200 hover:border-blue-300 transition">
            <div className="flex justify-between items-center">
              <label className="font-semibold text-gray-700 flex items-center gap-2">Jam <span className="text-xs font-normal text-gray-400">(Jarum Pendek)</span></label>
              <div className="flex items-center gap-2">
                <button onClick={toggleAmPm} className={`px-2 py-0.5 rounded text-xs font-bold ${!isPm ? 'bg-orange-500 text-white' : 'bg-gray-100 text-gray-400'}`}>AM</button>
                <button onClick={toggleAmPm} className={`px-2 py-0.5 rounded text-xs font-bold ${isPm ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-400'}`}>PM</button>
                <span className="font-mono bg-gray-100 px-2 rounded ml-1 w-8 text-center">{displayHour}</span>
              </div>
            </div>
            <input 
              type="range" min="1" max="12" value={displayHour} 
              onChange={(e) => handleHourChange(Number(e.target.value))}
              className="w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer accent-blue-600"
            />
          </div>

          {/* Input Menit */}
          <div className="space-y-3 p-3 rounded-lg border border-gray-200 hover:border-green-300 transition">
            <div className="flex justify-between items-center">
              <label className="font-semibold text-gray-700 flex items-center gap-2">Menit <span className="text-xs font-normal text-gray-400">(Jarum Panjang)</span></label>
              <span className="font-mono bg-gray-100 px-2 rounded w-8 text-center">{minute}</span>
            </div>
            <input 
              type="range" min="0" max="59" value={minute} 
              onChange={(e) => setMinute(Number(e.target.value))}
              className="w-full h-2 bg-green-100 rounded-lg appearance-none cursor-pointer accent-green-600"
            />
          </div>

          {/* Input Detik */}
          <div className="space-y-3 p-3 rounded-lg border border-gray-200 hover:border-red-300 transition">
            <div className="flex justify-between items-center">
              <label className="font-semibold text-gray-700 flex items-center gap-2">Detik <span className="text-xs font-normal text-gray-400">(Akurasi)</span></label>
              <span className="font-mono bg-gray-100 px-2 rounded w-8 text-center">{second}</span>
            </div>
            <input 
              type="range" min="0" max="59" value={second} 
              onChange={(e) => setSecond(Number(e.target.value))}
              className="w-full h-2 bg-red-100 rounded-lg appearance-none cursor-pointer accent-red-600"
            />
          </div>

          <div className="bg-blue-50 p-3 rounded text-xs text-blue-800">
            <strong>Catatan:</strong> Input detik tetap disediakan karena secara mekanik, pergerakan jarum detik akan sedikit menggeser posisi jarum menit dan jam, sehingga mempengaruhi presisi sudut akhir.
          </div>

        </div>
      </div>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>

</body>
</html>